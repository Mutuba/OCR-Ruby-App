<header class="py-10 flex justify-between items-center bg-indigo-600 relative">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <h1 class="text-3xl font-bold tracking-tight text-white text-center">
      <%= link_to "Ruby OCR", documents_path, class: "text-white hover:underline" %>
    </h1>
  </div>

  <div class="mr-4 relative">
    <% if current_user %>
      <div>
        <button id="user-dropdown" class="text-white flex items-center focus:outline-none">
          <%= current_user.full_name %>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="h-4 w-4 ml-1 fill-current text-white"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"></path></svg>
        </button>
        <div id="dropdown-menu" class="absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg hidden">
          <%= button_to "Sign out", destroy_user_session_path, method: :delete, class: "block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left" %>
        </div>
      </div>
    <% end %>
  </div>
</header>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const dropdownButton = document.getElementById('user-dropdown');
    const dropdownMenu = document.getElementById('dropdown-menu');

    document.addEventListener('click', function(event) {
      const isInsideDropdown = dropdownMenu.contains(event.target);
      const isToggleClicked = dropdownButton.contains(event.target);

      if (!isInsideDropdown && !isToggleClicked) {
        dropdownMenu.classList.add('hidden');
      }
    });

    dropdownButton.addEventListener('click', function() {
      dropdownMenu.classList.toggle('hidden');
    });
  });
</script>
